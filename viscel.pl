#!perl
#this program is free software it may be redistributed under the same terms as perl itself

use 5.012;
use warnings;
use lib "./lib";

our $VERSION = v4.0.0;

use Log;
use Server;
use Core::Comcol;
use Storage;

# ------ initialisation --------------------

my $l = Log->new();

#Server::init();
Storage::init();

my $i = 1;

Core::Comcol::init();
for my $comic (qw(20Galaxies  2214  2Masters  2WayMirror  8BitTheater  9thElsewhere  AbbysAgency  AbleAndBaker  AbstractGender  ADevineDramedy  Adventurers  Aether  Afterstrife  AldusMaycombe  ALessonIsLearned  Alice  AlienDice  AlienLovesPredator  Alone  AlphaLuna  AlphaShades  AndersLovesMaria  Angels2200  Angst  AngstTechnology  AnimalCrackers  AntiHeroForHire  AOI  AppleGeeks  AppleGeeksLite  AprilAndMay  ArcaneQuarry  AskDrEldritch  ASofterWorld  Atland  Avernyght  Awakened  BadassMuthas  BadGuyHigh  BalladMaker  Banished  BeaverAndSteve  BeMine  BetweenTwoWorlds  BiggerCheese  Blackaby  Blackbird  BlackLagoon  BlacklightTwilight  Blastwave  Blip  BloodOfTheDragon  bluecrashkit  BlueSkunk  BoredAndEvil  BoxjamsDoodle  BoyOnAStickAndSlither  BratHalla  BreakingTheMagic  Brink  BrunoTheBandit  BuckGodot  Building12  Bunny  Butternutsquash  CAD  CafFiends  Canadiana  Candi  CaptainSNES  CaribbeanBlue  CartoonTomb  CartoonTomb2  Cartridge  Carzorthade  Cascadia  CaseyAndAndy  Catalyst  CatAndGirl  Catena  catlegend  CharbyTheVampirate  CheckerboardNightmare  Cheer  CheshireCrossing  ChibiCheerleaders  ChickenWings  Chobits  ChocolateMilkmaid  ChoppingBlock  ChugworthAcademy  Chugworth  Clannad  ClanOfTheCats  ColinTheBrick  CollegeRoomiesFromHell  Comedity  commissioned  Concession  Connection  CoolCatStudio  Cooties  Copper  corneralley  CounterRose  CountYourSheep  CourtingDisaster  CowboysAndAliens  CrewDogs  CrimsonDark  Crowfeather  CruTheDwarf  Cubetoons  CultureShock  CyanideANDHappiness  DailyDinosaurComics  dandyandcompany  Darken  DarkReflections  DarthsAndDroids  DeadWinter  DeathByPixel  DeathNote  DeathPiglet  Depravia  desperateangels  DestinyDreamers  DevilsPanties  Dicebox  DieselSweeties  DirectionsOfDestiny  DireDestiny  DividedSky  dmfa  dmfaAbelsStory  DMOfTheRings  DNA2  DnDorks  DoctorVoluptua  DominicDeegan  DorkTower  Draconia  Dragonaur  Dreamland  dresdencodak  DrInsano  DuelingAnalogs  DungeonCrawlInc  DungeonsAndDenizens  EdepthAngel  EdgeTheDevilhunter  EGSFiller  EGSNewspaper  ElfenLied  ElfOnlyInn  Elftor  elgoonishshive  EliaAndAzuuClassics  ElijahAndAzuu  Elle  ElsieHooper  Elvenbaath  EmeraldWinter  EmergencyExit  EndTime  Erfworld  ErrantStory  Estancia  Ethos  EverAfter  EverythingJake  EvilInc  Exiern  ExploitationNow  ExterminatusNow  Fallen  Fanboys  Fandom  Fans  FantasyRealms  Fatebreaker  FeyWinds  FireEmblem  FissionChicken  FiveBucksAnHour  FlakyPastry  Flatwood  FletcherApts  FlintAgain  flipside  flipside0  ForgottenTower  foxtails  Framed  FramedNaught  Freefall  FriendlyHostility  FullFrontalNerdity  FullMetalAlchemist  FungusGrotto  FunnyFarm  Fuzznuts  GamingGuardians  geeksworld  GeistPanik  GeneCatlow  generalprotectionfault  George  Ghastly  Gigaville  GirlAndFed  GirlGenius  GirlsWithSlingshots  GirlVsPig  Girly  GiveMeTheSky  Goats  Goblins  GodMode  GodsOfArrKelaan  goKC  GoodShipChronicles  GottGauss  GreystoneInn  GrimTales  Grog  Grootlore  GUComics  Gunbaby  GunnerkriggCourt  HamstaPowah  HaruSari  Seen  Heard  Hellbound  Hellfire  Helpdesk  HerdThinners  HeroByNight  HeroesInc  HeroesOfMiddlecenter  HeyMike  HH  HiddenDisguise  Hiro  HockeyZombie  HolyBible  HomeOnTheStrange  HotelFred  Housd  HowUnfortunate  Ice  Ihooky  IndustrialRevolution  InheritTheEarth  Inhuman  InkTank  InniesAndOutties  InspectorHam  InstituteOfMetaphysics  InvaderZim  Inverloch  IrregularWebcomic  Is  Jack  JesusAndMo  JoeAndMonkey  JoeLovesCrappyMovies  JohnnySaturn  JoyceAndWalky  Joyride  Kagerou  kanami  Kaspall  KawaiiNot  KevinAndKell  Key  KhaosKomic  KingMe  Krakow  KrazyLarry  Kukuburi  LabBratz  lackadaisycats  LancasterTheGhostDetective  Landis  laslindas  LastBlood  LawnDarts  Legacy  Level99  lfg  licd  LittleDee  LittleGamers  LookWhatIBroughtHome  Loserz  LostAndFound  LuckyStar  MacHall  MaiHiMe  MaiOtome  MaiOtomeArashi  ManInHats  MansionOfE  marilith  MarryMe  MarshRocket  Masago  megatokyo  Melonpool  MenageA3  milennium  Minion  Minus  MiracleOfScience  Misfile  Misteam  MonicaFurious  Multiplex  MutantNinjaTurtlesGaiden  MysticRevolution  MyStupidLife  Nahast  NamirDeiter  NanasEverydayLife  Narbonic  NateVs  Necropolis  NegativeOne  NekoTheKitty  NemutionJewel  NeoEarth  NeoEarthNENW  NeonGenesisEvangelion  NetherOak  Netherworld  Newshounds  NichtLustig  NightHunters  Nodwick  NoNeedForBushido  Nonsense  NoPinkPonies  NoRestForTheWicked  NormAndCory  NoRoomForMagic  NorthWorld  NPC  nukees  OctopusPie  Of2Minds  OhMyGods  OkashinaOkashi  OkayPants  Oots  OtakuNoYen  OtenbaFiles  OtterSoldiers  OutThere  Overcompensating  OzyAndMillie  PaperEleven  Paradox  ParanormalActivity  PartiallyClips  PebbleVersion  pennyandaggie  PennyArcade  PerryBible  PetProfessional  PhineusMagicianForHire  PhoenixRequiem  PiledHigherAndDeeper  PinkyTA  Pixelheaven  PlanetKaren  Plastic  plusEV  PostNuke  pressstartoplay  ProjectROL  PropertyOfGwen  PunchAnPie  PurgatoryTower  pvp  QuartzBead  QueenOfWands  QuestionableContent  RadioactivePanda  RainbowCarousel  RaveKitty  Ravenwood  Ray  RealLife  ReasonsWhyWeRule  RedMantis  RedString  Reiko  Requiem  ReturnToEden  RiceBoy  RoadWaffles  RobAndElliot  ROTE  RoxxorUniversity  Roza  RPGworld  SageComic  SamAndFuzzy  SamuraiPride  SanAntonioRockCity  SarahZero  saturnalia  ScaryGoRound  SchlockMercenary  SerenianCentury  SexPercussions  SexViolence  SexyLosers  ShadowDragonExecutiveForce  Shadowgirls  Sheldon  Shift  Shifters  shortpacked  SidAndLasker  SimplySarah  SimulatedComicProduct  sinfest  Skyfall  Slackerz  SlightlyDamned  SlowWave  Sluggy  smbc  Snafu  SoapOnARope  SomethingPositive  SonicPals  Sorcery101  sorethumbs  SorryWereOpen  SoulFrontier  SpareParts  SpecialSchool  SpikeysWorld  SpikyHairedDragon  SPQRBlues  StarCrossedDestiny  Starslip  StealThisComic  StickyFloors  Strays  striptease  Stubble  SubCulture  SuburbanJungle  SuburbanTribe  SuccubusJustice  SuchRubbish  SugarBits  SugarStars  suicideforhire  SundayMorningCoffee  Superosity  SvenAndYon  TaipingDao  TakingTheBiPass  TalesOfPylea  talesofthetravellinggnome  Tang  TaoOfGeek  TAVision  TechnicalExplinationsOfScience  Templar  TengenToppaGurrenLagann  TerrorIsland  TheAbominableCharlesChristopher  TheaterHopper  TheBitchSquad  TheBMovieComic  TheBookOfBiff  TheBrokenMirror  TheCoffeeAchievers  TheEndOfThings  TheErrantApprentice  TheEye  TheFloor  TheGoodLittleRobot  TheHeroesHandbook  TheJoyOfTech  TheLounge  TheMakeshiftMiracles  TheMelancholyofHaruhiSuzumiya  thenoob  ThePeons  thepursuitofmandy  TheReborn  TheSecretOfMonkeyIsland  TheWarOfWinds  TheWayToYourHeart  TheWeapon  TheWhiteboard  TheWotch  ThreePanelSoul  TinTheIncompetentNinja  TitanSphere  ToddAndPenguin  Tomoyo42sRoom  TooMuchInformation  ToyDivision  Tozo  TrainingWheels  TrueMagic  TrueNuff  TryEverythingOnce  TwelveDragons  TwilightLady  TwoKinds  TwoLumps  TwoRooks  UFO  UglyHill  UltimateX  Unchained  UnderPower  Undertow  UnlikeMinerva  Unshelved  UnspeakableVault  Valiant  ValkyrieYuuki  Vampirates  VanVonHunter  VenusEnvy  VGcats  Vreakerz  WanderingOnes  WapsiSquare  WAR  WarpDriveActive  Wayfarer  Wayrift  Weregeek  WhatBirdsKnow  WhiteNinja  WhiteNoise  WickedPowered  Wigu  Wigu0  Winger  WingsOfWishes  WireHead  WithinShadows  Wonderella  Wondermark  worldbreak  xkcd  Xylia  YAFGC  Yamara  Yosh  YouDamnKid  YouSayItFirst  Zap  ZebraGirl  ZeroNoTsukaima  ZombieHunters  Zona  Zortic  MahouSenseiNegima  DGrayMan  AkumaJiten  Sekirei  Claymore  ChrnoCrusade  Bremen  BLAME  Basilisk  AyashiNoCeres  AngelDensetsu  SoulEater  HappyWorld  HighschoolOfTheDead  HentaiKamen  CodeBreaker  Psyren  HatsukoiLimited  UxU  Bastard  HotGimmick  LiarGame  BitterVirgin  DesireClimax  RosarioVampire  BokuNiNattaWatashi  HanaKimi  AbsoluteBoyfriend  GoldRush  666Satan  Ichigo100  FallInLoveLikeAComic  Mx0  LoveMonster  7thPeriodIsASecret  Lovesick  13NoKareshi  SchoolRumble  JyukiNingenJumbor  SpicyPink  BloodyKiss  LoveStrip  AiHimeAiToHimegoto  AkumaDeSourou  BlackCat  Hellsing  DiscipleKenichi  BlackWhite  BladeKitten  TokyoMewMew  Ef  GirlFriends  BlueDrop  BlueDropTenshiNoBokura  BlueDropMaioritaTenshi  HaruYoKoi  NeNe  Dreamer  LodossGreyWitch  LodossHeroicKnight  LodossDeedlitsTale  LodossDemonOfFlame  LodossLadyOfPharis  FreakAngels  Aramore  Lemnear  Drakuun  Genshiken  FairyTail  BlueDragon  LucidTV  FChords  ToLoveRu  IkkiTousen  DestructionPrincess  LoveHina  Kristy  Anima  07Ghost  Eko  HalfPrince  100WaysOfAnExorcist  20thCenturyBoys  21stCenturyBoys  Byooshi  666Satan  7Seeds  99HappySoul  DreamWorld  LilimKiss  KaNa  FLCL  ASpiritOfTheSun  AirGear  Ares  AngelHeart  Agharta  Akumetsu  Arigatou  AyuMayu  Amatsuki  Alive  Aiki  AngelicLayer  AzumangaDaioh  AnneFreaks  Aria  AyatsuriSakn  Aspirin  AfterSchoolNightmare  AshitaNoYoichi  EurekaSeven  CutieDevil  MoonPhase  DelusionDiary  PronQuest  Akaelae  EvilDiva  ByMoonAlone  Bardsworth  InstantClassic  BattleRoyale  BAA  BAALastOrder  Bokurano  Bobobo  BambooBlade  BokuNoFutatsuNoTsubasa  BeachStars  BlasterKnuckle  Belmonde  BattleClub  BReaction  Bakuman  BloodyMonday  BokuNoMarie  BoogiepopDoesntLaugh  BoogiepopDual  BattleRoyale2  BurstAngel  BirdyTheMighty2  CrossOver  Ciguatera  Chunrangyuljun  ChaosicRune  COTCS  Corseltel  CAT  Change123  Compiler  ChameleonJail  CowboyBebop  CafeKichijoji  CromartieHighSchool  Chairudo  ChronosHaze  ClothRoad  CGNightmareOfNunnally  CGLelouchOfTheRebellion  Crossing  ChisaXPon  HigurashiNoNakuKoroNi  VisionOfEscaflowne  Maburaho  AnimeNewsNinja  BizarreUprising  BobAndGeorge  CaptainExcelsior  Chisuji  Concerned  DogEatDoug  GenesJournal  HijinksEnsue  ImagineThis  KeychainOfCreation  AwfullyGeneric  BlackTapestries  EightToOne  HeadTrip  InsaneUndertakings  LegendOfBill  LegostarGalactica  Magellan  Lowroad  MSFHigh  NewWorld  PowerpuffGirls  PS238  RipAndTeri  RodAndBarry  Sailorsun  SequentialArt  SharingAUniverse  SilenceInTheDarkness  SilentKimbly  Staccato  Stewart  SuperSaviorJesusGo  SuperStupor  GreenAvenger  Lightbringer  Uncubed  WallyAndOsborne  WastedTalent  DevilMayCry  Dollgun  DarkerThanBlack  DaCapo  Deadman  Dolls  DragonDrive  Doubt  DragonHunter  DeadmanWonderland  DoubleArts  Dorohedoro  Dogs  DearS  BrainDead  DigitalPurgatory  AbsurdNotions  AcademyVale  Altermeta  BetterDays  BetterYouThanMe  Bhag  FindersKeepers  Catharsis  ChasingTheSunset  CombustibleOrange  comet7  Crap  MomokaCorner  PennyTribute  Dracula  DragonTails  Drowtales  Earthsong  EternalVenture  SomethingLikeLife  LovesRaymond  ExtraLife  FalconTwin  FauxPas  FightCastOrEvade  FilibusterCartoons  FragileGravity  GenrezvousPoint  GlueMeat  Heliothaumic  WeakEndWarriors  KernelPanic  LethalDoses  BlankIt  LifeOfConvenience  Lint  MakeWithTheFunny  MyPrivateLittleHell  Nekobox  NeoGreenwood  Bobbin  OddFish  OurHomePlanet  OkCancel  PastelDefender  PerkiGoth  Pixel  Spamusement  Supafine  NickTriggerAceDick  NinjaDeathStarMan  TryingHuman  Bellen  LunarAndKirk  WiglafAndMordred  RecklessYouth  ParallelDementia  Oriyan  IndefensiblePositions  CreamyBeamy  ActionAtADistance  BetweenPlaces  Atavism  Cerintha  DesertRocks  Cortland  Fantasticness  UndeadFriend  UnicornJelly  Wulffmorgenthaler  Yirmumah  IndefensiblePositions  SomethingPositive1937  MidnightMacabre  NewGoldDreams  RhymesWithWitch  Subnormality  Estar  PlatinumGrit  Sector41  Untitled  Sloan  Witchcraft  Dreamless  Optipess  Buttersafe  BrawlInTheFamily  AwkwardZombie  ExperiencePoints  ChainsawSuit  AmazingSuperPowers  DarkAndPink  ComicCritics  Jinxville  2pStart  TruckBearingKibble  WhatsNew  LukeSurl  ClemmysDoodles  SunsetGrill  WTTF  LifesAWitch  PixelBSC  Galaxion  Decorum  AbstruseGoose  Handrooster  TriangleDude  ZedReckoning  InnerGeek  PicturesForSadChildren  Leftville  IndoorHeroes  GamerLamer  PilliAdventure  LastPlaceComics  DigitalUnrest  CrookedGremlins  CowbirdsInLove  HarkAVagrant  HilarityComics  DaisyOwl  DrMcNinja  StarkReality  MathsForLaughs  RockPaperCynic  NowhereGirl  Miscellanea  Guron  DreadnoughtInvasionSix  FurWillFly  TheLandscaper  AcornGrove  TunaCarpaccio  Cucuc  PermanentTemps  FailedObjective  Terra  Juathuur1  Juathuur2  RTComics  AlaskaRobotics  GeekFetish  GuiltyPleasures  WillowsGrove  GeekLovesNerd  1977  CapesNBabes  TheDevonLegacy  StarshipMoonhawk  CosmicFeline  StarshipMoonhawkRetro  SpaceDestroyerHunter  OneQuestion  TalesOfPyleaCrux  PrepareToDie  Faradon  EnchantedDreams  Sins  HeroInTraining  Diablito  EpicFail  CrossingDeath  2ndShift  Arcana  RivalAngels  Aikida  HardGraft  OriginalLife  HouseOfLSD  SeriousEmotionalDisturbance  Schism  TheMeek  Pown  PhantomWizard  OutAtFive  TheLittleMatchGirl  MildlyHotPeppers  SurvivingTheWorld  PeppermintSaga  HentaiActionTheatre  TheSystem  ButtercupFestival  DrawingBoard  Doghouse  Becky  EagleAndDove  Prefeathers  DemonsInTheCloset  WoodpeckerCrossing  Rewind  Krakow20  BeyondTheTree  BearNuts  DeadHeaven  EtherealLegacies  CodeBlack  CoinOp  ConScrew  TempestOak  FallenAngelsUsedBooks  FromTheMargin  RulesOfMakeBelieve  SalientCaligation  PeterIsTheWolf  Stellar  Ayane  NorthernEdge  AssortedOddities  WeltonColbert  Frank  AkiAlliance  LvlUp  PokemonX  SuperEffective  AntiHeroes  RaisingHell  KissingChaos  Luz  Ragni  Aardehn  ThePort  SinTitulo  ThePrincessPlanet  CustomersSuck  BackwardCompatible  Ding  AngelMoxie  BreakfastOfTheGods  PsychicAcademy  SchoolBites  DelusionaryState  FurthiaHigh  SandraAndWoo  StrawberryDeathCake  GeekHero  Precocious  Garanos  PCWeenies  DevilBear  GoodbyeChains  CwensQuest  PicturesOfYou  TalesOfThistledown  Marooned  LastResort  DemonEater  GodsPack  Taiki  UnionOfHeroes  Abandon  LuckyLottery  SophiaAwakening  WintersInLavelle  Robomeks  KickinRad  Amazoness  BeyondRapture  RuneMaster  SpudComics  ProjectAusserdem  LavenderLegend  RoadToEden  NoCrap  Shades  AntsOnline  Cuchulainn  ZorphbertAndFred  SosSaga  ModelBehaviour  QuittingTime  Ginpu  DeadFingers  DragonHeroes  Endstone  ShapeQuest  OneSheepOneMission  TheWrongHero  HaikuComics  Bible  RawFish  Prydwen  Rain  TwoGamerz  CosmicHellCats  PsychicSoldierKai  Daqueran  Enoch  RegisteredWeapon  DrowLove  NotIncluded  BearVsZombie  LongestSojourn  Fera  Fafnir  LonelyPair  CollarSix  TodayNothingHappened  HellHotel  Cealdian  OctoberThirtyfirst  GreaterGood  MuseAcademy  Annyseed  OmegaManor  RedMoon  EscapeFromTerra  KittyHawk  NerfNow  KnowledgeIsPower  DumnestorsHeroes  AsWeWere  Kiss4k  Locus  StraysOnline  Knave  EnkersTale  VenomLegion  AjanWarriors  HeroesOfLesserEarth  CulricsChronicles  PrideOfLife  WantToBuyDignity  NotAlone  Harkovast  Cherry  DarkWings  LiliDeacon  Unstuffed  GalacticDivine  MyLady  Ponzi  JovianLuck  ThisVagabondLife  MoonTown  CyBoar  Wintergreen  Reaper  SpaghettiStrapWestern  Anatta  Engine  Indavo  Reila  Tsukihime  Fate  YuGiOh  DragonBall  Trigun  TrigunMaximum  SpiceAndWolf  MariaHolic  Kampfer  KissXSis  DarkLegacy  KingOfThorn  JigokuShoujo  JigokuShoujoR  Saikano  LovecraftIsMissing  FamilyMan  BiteMe  EerieCuties  KarasumKyouko  BrokenPlotDevice  Nymph  GoodCheese  Umisho  InuNekoJump  OtogiNoMechaNoRena  Sankarea  LiarGame  WagayaNoOinarisama  Puchimon  Heaven  AngelDust )) {
	my $spot = Core::Comcol->create('Comcol_'.$comic,1);
	next unless $spot;
	while ($spot->mount()) {
		my $ent = $spot->fetch();
		unless ($ent) {
			$spot = $spot->next();
			next;
		}
		my $blob = \$ent->{blob}; 
		Storage::put($ent->{sha1},$blob);
		#say defined Storage::get($ent->{sha1});
		$spot = $spot->next();
	}
	#Storage::clean;
}